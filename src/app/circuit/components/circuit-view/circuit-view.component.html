<div class="spacer"></div>
<ng-container *ngIf="circuit$ | async as circuit">
    <h1>{{ circuit.name }}</h1>
    <ion-list #timerList>
        <ion-item
            #scrollTo
            *ngFor="let timer of timers$ | async; let i = index; trackBy: timerTrackBy"
        >
            <app-circuit-timer
                #childTimer
                [timerData]="timer"
                [isActive]="(playIndex$ | async) === i"
                [isPlaying]="isPlaying$ | async"
                (timerComplete)="nextTimer()"
            ></app-circuit-timer>
        </ion-item>
    </ion-list>
    <app-circuit-controls
        [circuitComplete]="circuitComplete$ | async"
        [isPlaying]="isPlaying$ | async"
        (play)="play()"
        (skip)="skip()"
        (delete)="delete()"
        (reset)="resetTimers()"
        (edit)="editCircuit.emit(circuit)"
    ></app-circuit-controls>
</ng-container>
<div [class.pyro]="circuitComplete$ | async">
    <div class="before"></div>
    <div class="after"></div>
</div>
